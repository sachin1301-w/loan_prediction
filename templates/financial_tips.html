{% extends "base.html" %}

{% block title %}Financial Tips - Loan Prediction{% endblock %}

{% block content %}
<div class="card" style="max-width: 1200px; margin: 0 auto;">
    <h2 style="margin-bottom: 2rem; color: var(--text-primary);">ğŸ’¡ Financial Awareness & Guidance</h2>
    
    <!-- Category Filter -->
    <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; justify-content: center;">
        <button onclick="filterTips('all')" class="tip-filter active" data-category="all">All Tips</button>
        <button onclick="filterTips('credit')" class="tip-filter" data-category="credit">ğŸ¯ Credit Score</button>
        <button onclick="filterTips('savings')" class="tip-filter" data-category="savings">ğŸ’° Savings</button>
        <button onclick="filterTips('investment')" class="tip-filter" data-category="investment">ğŸ“ˆ Investment</button>
        <button onclick="filterTips('loan')" class="tip-filter" data-category="loan">ğŸ¦ Loans</button>
    </div>

    <!-- Tips Grid -->
    <div id="tipsGrid" style="display: grid; gap: 1.5rem;">
        {% for tip in financial_tips %}
        <div class="tip-card" data-category="{{ tip.category }}" style="background: var(--input-bg); padding: 2rem; border-radius: 15px; border-left: 5px solid 
            {% if tip.category == 'credit' %}#667eea
            {% elif tip.category == 'savings' %}#2ecc71
            {% elif tip.category == 'investment' %}#f39c12
            {% else %}#3498db{% endif %}; transition: all 0.3s;">
            <div style="display: flex; align-items: start; gap: 1.5rem;">
                <span style="font-size: 3rem;">{{ tip.icon }}</span>
                <div style="flex: 1;">
                    <h3 style="color: var(--text-primary); margin-bottom: 1rem;">{{ tip.title }}</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1rem;">{{ tip.content }}</p>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <span style="padding: 0.5rem 1rem; background: var(--card-bg); border-radius: 20px; font-size: 0.85rem; color: var(--text-primary); text-transform: capitalize;">
                            {{ tip.category }}
                        </span>
                        <button onclick="markHelpful({{ tip.id }})" class="btn" style="padding: 0.5rem 1rem; font-size: 0.85rem; background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);">
                            ğŸ‘ Helpful
                        </button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Quick Action Cards -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 3rem;">
        <a href="{{ url_for('credit_health') }}" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 2rem; border-radius: 15px; color: white; text-decoration: none; transition: all 0.3s;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ“Š</div>
            <h3 style="margin-bottom: 0.5rem;">Check Credit Health</h3>
            <p style="opacity: 0.9; font-size: 0.9rem;">Get detailed analysis of your credit profile</p>
        </a>
        
        <a href="{{ url_for('chatbot') }}" style="background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%); padding: 2rem; border-radius: 15px; color: white; text-decoration: none; transition: all 0.3s;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ¤–</div>
            <h3 style="margin-bottom: 0.5rem;">Ask AI Advisor</h3>
            <p style="opacity: 0.9; font-size: 0.9rem;">Get instant answers to your financial questions</p>
        </a>
        
        <a href="{{ url_for('loan_comparison') }}" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); padding: 2rem; border-radius: 15px; color: white; text-decoration: none; transition: all 0.3s;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ¦</div>
            <h3 style="margin-bottom: 0.5rem;">Compare Loans</h3>
            <p style="opacity: 0.9; font-size: 0.9rem;">Find the best loan products for your needs</p>
        </a>
    </div>
</div>

<style>
    .tip-filter {
        padding: 0.75rem 1.5rem;
        border: 2px solid var(--input-border);
        background: var(--card-bg);
        color: var(--text-primary);
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 0.9rem;
    }

    .tip-filter:hover {
        border-color: #667eea;
        color: #667eea;
    }

    .tip-filter.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-color: transparent;
    }

    .tip-card:hover {
        transform: translateX(10px);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    }
</style>

<script>
    function filterTips(category) {
        const cards = document.querySelectorAll('.tip-card');
        const buttons = document.querySelectorAll('.tip-filter');
        
        buttons.forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.category === category) {
                btn.classList.add('active');
            }
        });
        
        cards.forEach(card => {
            if (category === 'all' || card.dataset.category === category) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }

    async function markHelpful(tipId) {
        try {
            await fetch('/mark-tip-helpful', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({tip_id: tipId, helpful: true})
            });
            alert('Thank you for your feedback! ğŸ‘');
        } catch (error) {
            console.error('Error:', error);
        }
    }
</script>
{% endblock %}
